<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="canonical" href="https://noeppi-noeppi.github.io/Crocus/plugins/anniversary.html"><link rel=prev href=core.html><link rel=next href=filter.html><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Anniversary - Crocus Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../assets/stylesheets/palette.ab4e12ef.min.css><link rel="stylesheet" href="../assets/external/fonts.googleapis.com/css.49ea35f2.css"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#the-anniversary-plugin class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../index.html title="Crocus Documentation" class="md-header__button md-logo" aria-label="Crocus Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Crocus Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Anniversary </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href="https://github.com/noeppi-noeppi/Crocus" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> noeppi-noeppi/Crocus </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../index.html title="Crocus Documentation" class="md-nav__button md-logo" aria-label="Crocus Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Crocus Documentation </label> <div class=md-nav__source> <a href="https://github.com/noeppi-noeppi/Crocus" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> noeppi-noeppi/Crocus </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../getting-started/install.html class=md-nav__link> <span class=md-ellipsis> Installing Crocus </span> </a> </li> <li class=md-nav__item> <a href=../getting-started/configuration.html class=md-nav__link> <span class=md-ellipsis> Configuring Crocus </span> </a> </li> <li class=md-nav__item> <a href=../getting-started/run.html class=md-nav__link> <span class=md-ellipsis> Running Crocus </span> </a> </li> <li class=md-nav__item> <a href=../getting-started/secrets.html class=md-nav__link> <span class=md-ellipsis> Providing Secrets </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Advanced Topics </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Advanced Topics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../advanced/architecture.html class=md-nav__link> <span class=md-ellipsis> Crocus Architecture </span> </a> </li> <li class=md-nav__item> <a href=../advanced/configuration-format.html class=md-nav__link> <span class=md-ellipsis> Configuration Reference </span> </a> </li> <li class=md-nav__item> <a href=../advanced/io-mode.html class=md-nav__link> <span class=md-ellipsis> IO Mode </span> </a> </li> <li class=md-nav__item> <a href=../advanced/sesquiannual.html class=md-nav__link> <span class=md-ellipsis> Sesquiannual (iCal library) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Plugins </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Plugins </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=core.html class=md-nav__link> <span class=md-ellipsis> Core </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Anniversary </span> <span class="md-nav__icon md-icon"></span> </label> <a href=anniversary.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Anniversary </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#the-anniversary-event-source class=md-nav__link> <span class=md-ellipsis> The anniversary event source </span> </a> <nav class=md-nav aria-label="The anniversary event source"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#anniversary-date-definitions class=md-nav__link> <span class=md-ellipsis> Anniversary date definitions </span> </a> </li> <li class=md-nav__item> <a href=#anniversary-date-modifiers class=md-nav__link> <span class=md-ellipsis> Anniversary date modifiers </span> </a> </li> <li class=md-nav__item> <a href=#anniversary-date-filters class=md-nav__link> <span class=md-ellipsis> Anniversary date filters </span> </a> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=filter.html class=md-nav__link> <span class=md-ellipsis> Filter </span> </a> </li> <li class=md-nav__item> <a href=frab.html class=md-nav__link> <span class=md-ellipsis> Frab </span> </a> </li> <li class=md-nav__item> <a href=google.html class=md-nav__link> <span class=md-ellipsis> Google </span> </a> </li> <li class=md-nav__item> <a href=ical.html class=md-nav__link> <span class=md-ellipsis> iCalendar </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Plugin Development </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Plugin Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../development/plugin-loading.html class=md-nav__link> <span class=md-ellipsis> Plugin Loading </span> </a> </li> <li class=md-nav__item> <a href=../development/configuration.html class=md-nav__link> <span class=md-ellipsis> Service Configuration </span> </a> </li> <li class=md-nav__item> <a href=../development/bundling.html class=md-nav__link> <span class=md-ellipsis> Plugin Bundling </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#the-anniversary-event-source class=md-nav__link> <span class=md-ellipsis> The anniversary event source </span> </a> <nav class=md-nav aria-label="The anniversary event source"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#anniversary-date-definitions class=md-nav__link> <span class=md-ellipsis> Anniversary date definitions </span> </a> </li> <li class=md-nav__item> <a href=#anniversary-date-modifiers class=md-nav__link> <span class=md-ellipsis> Anniversary date modifiers </span> </a> </li> <li class=md-nav__item> <a href=#anniversary-date-filters class=md-nav__link> <span class=md-ellipsis> Anniversary date filters </span> </a> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=the-anniversary-plugin>The Anniversary Plugin</h1> <p>The anniversary plugin allows to define annually repeating events in a flexible DSL. Its plugin id is <code>tuxtown.crocus.anniversary</code>.</p> <h2 id=the-anniversary-event-source>The <code>anniversary</code> event source</h2> <p>The anniversary event source generates annually repeating events.</p> <p>It has the following generic properties:</p> <ul> <li><code>since</code> is a local date that marks the first day of the time period in which anniversary events will be generated.</li> <li><code>until</code> is a local date that marks the last day of the time period in which anniversary events will be generated. It defaults to the end of the year that follows the current year.</li> </ul> <p>Individual anniversaries can be created by the <code>day</code> function. It takes a name of the anniversary, then optionally a description and an anniversary date definition. The description can also be a function derived from the actual date on which the event takes place. The anniversary date definition can be given as a closure. Examples include:</p> <div class=highlight><pre><span></span><code><span class=n>day</span><span class=o>(</span><span class=s1>&#39;Anniversary 1&#39;</span><span class=o>,</span><span class=w> </span><span class=cm>/* anniversary date definition */</span><span class=o>)</span>
<span class=n>day</span><span class=o>(</span><span class=s1>&#39;Anniversary 2&#39;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;some description&#39;</span><span class=o>,</span><span class=w> </span><span class=cm>/* anniversary date definition */</span><span class=o>)</span>
<span class=n>day</span><span class=o>(</span><span class=s1>&#39;Anniversary 3&#39;</span><span class=o>,</span><span class=w> </span><span class=o>{</span><span class=w> </span><span class=s1>&#39;it is currently &#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>it</span><span class=o>.</span><span class=na>month</span><span class=w> </span><span class=o>},</span><span class=w> </span><span class=cm>/* anniversary date definition */</span><span class=o>)</span>
<span class=n>day</span><span class=o>(</span><span class=s1>&#39;Anniversary 4&#39;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=cm>/* anniversary date definition */</span>
<span class=o>}</span>
<span class=n>day</span><span class=o>(</span><span class=s1>&#39;Anniversary 5&#39;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;some description&#39;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=cm>/* anniversary date definition */</span>
<span class=o>}</span>
</code></pre></div> <h3 id=anniversary-date-definitions>Anniversary date definitions</h3> <p>An anniversary date definition selects a subset of days from all days that fall between the configured <code>since</code> and <code>until</code> values. There are three ways to create an anniversary date definition:</p> <table> <thead> <tr> <th colspan=1 rowspan=1> <p><strong>Function</strong></p> </th> <th colspan=1 rowspan=1> <p><strong>Description</strong></p> </th> </tr> </thead> <tbody> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>always()</code></span></p> </td> <td colspan=1 rowspan=1> <p>Yields an anniversary date definition that selects every single day in the considered period of time.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>only{ ... }</code></span></p> </td> <td colspan=1 rowspan=1> <p>Yields an anniversary date definition that evaluates the provided closure for every day in the considered period of time and select the dates for which the closure returns <code>true</code>. For example <code>only { it.dayOfMonth + it.monthValue == 7 }</code> selects all dates, where the <em>month of day</em> plus the <em>month number</em> equal seven.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>on(...)</code></span> or <span style=white-space:nowrap> <code>in(...)</code></span></p> </td> <td colspan=1 rowspan=1> <p>Yields an anniversary date definition based on a filter. See <a href=#anniversary-date-filters>below</a>. Using <code>on(...)</code> is equivalent to <code>always().on(...)</code>. </p> </td> </tr> </tbody> </table> <h3 id=anniversary-date-modifiers>Anniversary date modifiers</h3> <p>There are a variety of modifier methods that can be called on an anniversary date definition.</p> <table> <thead> <tr> <th colspan=1 rowspan=1> <p><strong>Function</strong></p> </th> <th colspan=1 rowspan=1> <p><strong>Description</strong></p> </th> </tr> </thead> <tbody> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef1 &amp; dateDef2</code></span></p> </td> <td colspan=1 rowspan=1> <p>Yields a date definition that selects all dates selected by both <code>dateDef1</code> and <code>dateDef2</code>.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef1 | dateDef2</code></span></p> </td> <td colspan=1 rowspan=1> <p>Yields a date definition that selects all dates selected by at least one of <code>dateDef1</code> and <code>dateDef2</code>.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef + temporalAmount</code></span> </p> </td> <td colspan=1 rowspan=1> <p>Shifts all dates selected by <code>dateDef</code> by the given temporal amount into the future. The temporal amount can be given like <code>'2 years + 1 week'</code>.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef - temporalAmount</code></span> </p> </td> <td colspan=1 rowspan=1> <p>Shifts all dates selected by <code>dateDef</code> by the given temporal amount into the past. This works analogous to <code>dateDef + temporalAmount</code>.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef.firstDayOfMonth()</code> </span></p> </td> <td colspan=1 rowspan=1> <p>Adjusts all dates selected by <code>dateDef</code> to point to the first day of the month in which the original selected date lies. </p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef.lastDayOfMonth()</code></span></p> </td> <td colspan=1 rowspan=1> <p>Adjusts all dates selected by <code>dateDef</code> to point to the last day of the month in which the original selected date lies.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef.firstDayOfYear()</code></span></p> </td> <td colspan=1 rowspan=1> <p>Adjusts all dates selected by <code>dateDef</code> to point to the first day of the year in which the original selected date lies.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef.lastDayOfYear()</code></span></p> </td> <td colspan=1 rowspan=1> <p>Adjusts all dates selected by <code>dateDef</code> to point to the last day of the year in which the original selected date lies.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef.firstDayOfNextYear()</code> </span></p> </td> <td colspan=1 rowspan=1> <p>Adjusts all dates selected by <code>dateDef</code> to point to the first day of the year that follows the year in which the original selected date lies. This is equivalent to <code>dateDef.lastDayOfYear() + '1 day'</code></p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef.next(dow)</code></span></p> </td> <td colspan=1 rowspan=1> <p>Adjusts all dates selected by <code>dateDef</code> at least zero and at most six days into the future, such that the newly selected day falls on the given day of week. A day of week can be given as a string containing its full name (<code>thursday</code>) or its three-letter abbreviation (<code>thu</code>).</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef.last(dow)</code></span></p> </td> <td colspan=1 rowspan=1> <p>Adjusts all dates selected by <code>dateDef</code> at least zero and at most six days into the past, such that the newly selected day falls on the given day of week.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef.next(dow)</code></span></p> </td> <td colspan=1 rowspan=1> <p>Adjusts all dates selected by <code>dateDef</code> at least one and at most seven days into the future, such that the newly selected day falls on the given day of week.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef.previous(dow)</code></span></p> </td> <td colspan=1 rowspan=1> <p>Adjusts all dates selected by <code>dateDef</code> at least one and at most seven days into the past, such that the newly selected day falls on the given day of week.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef.firstInMonth(dow)</code> </span></p> </td> <td colspan=1 rowspan=1> <p>This is equivalent to <code>dateDef.firstDayOfMonth().next(dow)</code>.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef.lastInMonth(dow)</code></span></p> </td> <td colspan=1 rowspan=1> <p>This is equivalent to <code>dateDef.lastDayOfMonth().last(dow)</code>. </p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>dateDef.on(...)</code></span> or <span style=white-space:nowrap> <code>dateDef.in(...)</code></span></p> </td> <td colspan=1 rowspan=1> <p>Applies an anniversary date filter to <code>dateDef</code>. The result is a new anniversary date definition that considers all days selected by <code>dateDef</code> and only retains the days, that match the provided filter. See <a href=#anniversary-date-filters>below</a>.</p> </td> </tr> </tbody> </table> <h3 id=anniversary-date-filters>Anniversary date filters</h3> <p>Anniversary date filters restrict the selected events over a domain. A filter is always applied using the <code>on</code> or <code>in</code> function. Both functions behave exactly the same. All possible arguments to these functions are described in the table below:</p> <table> <thead> <tr> <th colspan=1 rowspan=1> <p><strong>Filter</strong></p> </th> <th colspan=1 rowspan=1> <p><strong>Description</strong></p> </th> </tr> </thead> <tbody> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>on(day, month)</code></span> </p> </td> <td colspan=1 rowspan=1> <p>Selects days based on the <em>month</em> and <em>day of month</em>. The <em>day of month</em> can be given as an integer (1-31), the <em>month</em> can be given as a string (<code>'september'</code> or <code>'sep'</code>).</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>on(day)</code></span></p> </td> <td colspan=1 rowspan=1> <p>Selects on a monthly basis based on the <em>day of month</em>. The <em>day of month</em> must be given as an integer (1-31).</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>on(month)</code></span></p> </td> <td colspan=1 rowspan=1> <p>Selects all days in the provided <em>month</em>. The <em>month</em> can be given as a string (<code>'september'</code> or <code>'sep'</code>).</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>on(dow)</code></span></p> </td> <td colspan=1 rowspan=1> <p>Select all days that fall on the provided <em>day of the week</em>. The <em>day of the week</em> can be given as a string (<code>'thursday'</code> or <code>'thu'</code>).</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>on(calendarWeek)</code></span></p> </td> <td colspan=1 rowspan=1> <p>Selects all days that fall in the provided <em>calendar week</em>. This uses <em>ISO 8601</em> calendar week, where the first calendar week in a year is the week that contains the first thursday of that year. The <em>calendar week</em> can be given as a string of the form <code>'cw##'</code> where <code>##</code> shall be replaced by the calendar week number.</p> </td> </tr> <tr> <td colspan=1 rowspan=1> <p><span style=white-space:nowrap> <code>on('easter')</code></span></p> </td> <td colspan=1 rowspan=1> <p>Selects easter sundays in the gregorian calendar. </p> </td> </tr> </tbody> </table> <h3 id=examples>Examples</h3> <p>This section provides a few examples for anniversary configurations.</p> <div class=highlight><pre><span></span><code><span class=n>day</span><span class=o>(</span><span class=s1>&#39;Today is a day&#39;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>always</span><span class=o>()</span>
<span class=o>}</span>

<span class=n>day</span><span class=o>(</span><span class=s1>&#39;New years eve&#39;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>on</span><span class=o>(</span><span class=mi>31</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;december&#39;</span><span class=o>)</span>
<span class=o>}</span>

<span class=n>day</span><span class=o>(</span><span class=s1>&#39;This anniversary will never occur&#39;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>on</span><span class=o>(</span><span class=mi>31</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;february&#39;</span><span class=o>)</span>
<span class=o>}</span>

<span class=n>day</span><span class=o>(</span><span class=s1>&#39;Friday the 13th&#39;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;an unlucky day&#39;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>on</span><span class=o>(</span><span class=mi>13</span><span class=o>)</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>on</span><span class=o>(</span><span class=s1>&#39;friday&#39;</span><span class=o>)</span><span class=w> </span><span class=c1>// or equivalent: on(13).on(&#39;friday&#39;)</span>
<span class=o>}</span>

<span class=n>day</span><span class=o>(</span><span class=s1>&#39;Pentecost&#39;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>on</span><span class=o>(</span><span class=s1>&#39;easter&#39;</span><span class=o>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;49 days&#39;</span>
<span class=o>}</span>

<span class=n>day</span><span class=o>(</span><span class=s1>&#39;Mothers Day in the US&#39;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>on</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;may&#39;</span><span class=o>).</span><span class=na>next</span><span class=o>(</span><span class=s1>&#39;sunday&#39;</span><span class=o>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;1 week&#39;</span>
<span class=o>}</span>

<span class=n>day</span><span class=o>(</span><span class=s1>&#39;1. Advent Sunday&#39;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>on</span><span class=o>(</span><span class=mi>25</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;december&#39;</span><span class=o>).</span><span class=na>previous</span><span class=o>(</span><span class=s1>&#39;sunday&#39;</span><span class=o>)</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=s1>&#39;3 weeks&#39;</span>
<span class=o>}</span>

<span class=n>day</span><span class=o>(</span><span class=s1>&#39;calendar week 42&#39;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;this will be a week in mid-october&#39;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>on</span><span class=o>(</span><span class=s1>&#39;cw42&#39;</span><span class=o>)</span>
<span class=o>}</span>
</code></pre></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "..", "features": ["content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>